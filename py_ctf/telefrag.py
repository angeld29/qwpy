###
### Generated by QuakeC -> Python translator
### Id: qc2python.py,v 1.5 2001/02/05 21:15:44 barryp Exp 
###
### 2001-02-17 Cleaned up translation (barryp)
###
from qwpython.qwsv import engine, Vector
from qwpython.qcsupport import qc

import defs
import client

# 
# **
# ** _telefrg.qc (Telefrag Code, 1.1)
# **
# ** Copyright (C) 1996 Johannes Plass
# **
# ** This program is free software; you can redistribute it and/or modify
# ** it under the terms of the GNU General Public License as published by
# ** the Free Software Foundation; either version 2 of the License, or
# ** (at your option) any later version.
# **
# ** This program is distributed in the hope that it will be useful,
# ** but WITHOUT ANY WARRANTY; without even the implied warranty of
# ** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# ** GNU General Public License for more details.
# **
# ** You should have received a copy of the GNU General Public License
# ** along with this program; if not, write to the Free Software
# ** Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
# **
# ** Author:   Johannes Plass (plass@dipmza.physik.uni-mainz.de)
# **
# ** --
# ** Sniped by Zoid for ThreeWave Mods, GPL respected
# **
# 

def TelefragSelectSpawnPoint(spot, *qwp_extra):
    search_spot = 25
    firstspot = spot
    while search_spot:
        ents = engine.findradius(spot.origin, 50)
        if not ents:
            search_spot = 0
        else:
            occupied = 0
            for e in ents:
                if e.classname == 'player' and e.deadflag == defs.DEAD_NO:
                    occupied = 1
                    break                
            if occupied:
                spot = client.SelectSpawnPoint()
                search_spot -= 1
                if spot == firstspot:
                    search_spot = 0                
            else:
                search_spot = 0        
    return spot
